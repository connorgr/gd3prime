<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>GD3 Example Mutation Matrix</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div id="test"></div>
    <script src="../bower_components/d3/d3.min.js"></script>
    <script src="../gd3.js"></script>
    <script>

    var body = d3.select('body');

    var style = {
      width: 800
    }

    var svg = body.append('svg')
        .style('margin-left', '50px')
        .style('margin-top', '50px')
        .attr('width', 100)
        .attr('height', 40);
    svg.append('rect')
        .attr('width', 40)
        .attr('height', 40)
        .attr('class', 'gd3-tipobj')
        .style('fill', 'steelblue');

    svg.append('rect')
        .attr('x', 50)
        .attr('width', 40)
        .attr('height', 40)
        .attr('class', 'gd3-tipobj')
        .style('fill', 'orange');

    svg.call(gd3.tooltip.make().html(function(d,i) { return '<span>'+i+'</span>'; }));

    body.append('br');

    var svgdos = body.append('svg')
        .style('margin-left', '50px')
        .style('margin-top', '50px')
        .attr('width', 20)
        .attr('height', 20);
    svgdos.append('rect')
        .attr('width', 20)
        .attr('height', 20)
        .attr('class', 'gd3-tipobj')
        .style('fill', 'crimson');

    svgdos.call(gd3.tooltip.make().html(function(d) { return '<span>hola</span>'; }));

    body.append('br');

    body.append('hr');

    var testText = new gd3.tooltip.text('Testing tooltip\n'),
        imgSrc = 'https://www.google.com/images/srpr/logo11w.png',
        testImg = new gd3.tooltip.image(imgSrc, 'Google\'s logo'),
        testLink = new gd3.tooltip.link('https://google.com', 'Google Link\n'),
        testLinkImg = new gd3.tooltip.link('https://google.com', testImg),
        testVote = new gd3.tooltip.vote(null,null,80);

    testText.render(body);
    body.append('br');
    testLink.render(body);
    body.append('br');
    testLinkImg.render(body);
    body.append('br');
    testImg.render(body);
    body.append('br');
    testVote.render(body);

    var testTable = new gd3.tooltip.table([ [1,2,3], [4,5,testText] ] );
    testTable.render(body);

    body.append('br');

    var testDatum = gd3.tooltip.datum({type: 'text', text:'datum text test works' });
    testDatum.render(body);

    body.append('br');
    body.append('hr');

    var svgtres = body.append('svg')
        .style('margin-left', '50px')
        .style('margin-top', '50px')
        .attr('width', 20)
        .attr('height', 20);
    var svgtres_rects = svgtres.selectAll('rect')
        .data(['test'])
        .enter()
        .append('rect')
            .attr('width', 20)
            .attr('height', 20)
            .attr('class', 'gd3-tipobj')
            .style('fill', 'forestgreen');

    var testingData = [
          { type: 'text', text: 'Title would go here'},
          { type: 'link', href: 'https://google.com', body: 'Google link test'}
        ].map(function(d) { return gd3.tooltip.datum(d); });

    console.log(testingData)

    svgtres.call(gd3.tooltip.make().useData(testingData));

    // svgtres_rects.each(function(data) {
    //   var tipdata = gd3.tooltip.data(data);
    //   tipdata.forEach(function(d) { d.render(tooltip); });
    //   svgtres.call( gd3.tooltip.make().html(html) );
    // });

    </script>
  </body>
</html>